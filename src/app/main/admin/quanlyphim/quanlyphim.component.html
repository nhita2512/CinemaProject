<h2 class="text-center">Movie List</h2>
<div class="text-right mb-2"><button (click)="modalShow()" class="btn btn-primary" style="width:22%">Them Phim</button>
</div>

<!-- Modal for Movie -->
<div class="modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Movie Form</h5>
                <button (click)="modalHide()" type="button" id="btnClose" class="close" data-dismiss="modal"
                    aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form style="height:500px;overflow-y:auto" [formGroup]="addForm" class="">
                    <div class="form-group">
                        <label>Ma phim</label>
                        <input type="text" class="form-control" formControlName="maPhim" />
                        <div *ngIf="checkError('maPhim')" class="alert alert-danger">
                            <span *ngIf="checkError('maPhim', 'required')">
                                Ma phim không đc để trống
                            </span>
                            <span *ngIf="
                      checkError('maPhim', 'minlength') ||
                      checkError('maPhim', 'maxlength')
                    ">
                                Ma phim phải từ 3 đến 10 kí tự
                            </span>
                        </div>
                    </div>
                    <!-- Lam Validate lai cho cac phia duoi tuong tu nhu Ussername -->
                    <div class="form-group">
                        <label>Ten Phim</label>
                        <input type="text" class="form-control" formControlName="tenPhim" />
                        <div *ngIf="checkError('tenPhim')" class="alert alert-danger">
                            <span *ngIf="checkError('tenPhim', 'required')">
                                Ten Phim không đc để trống
                            </span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Bi Danh</label>
                        <input type="text" class="form-control" formControlName="biDanh" />
                        <div *ngIf="checkError('biDanh')" class="alert alert-danger">
                            <span *ngIf="checkError('biDanh', 'required')">
                                biDanh không đc để trống
                            </span>
                        </div>
                        <div class="form-group">
                            <label>Trailer</label>
                            <input type="text" class="form-control" formControlName="trailer" />
                            <div *ngIf="checkError('trailer')" class="alert alert-danger">
                                <span *ngIf="checkError('trailer', 'required')">
                                    Trailer không đc để trống
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Hinh Anh</label>
                            <input id="file-uploader" class="form-control" formControlName="hinhAnh" />
                            <div *ngIf="checkError('hinhAnh')" class="alert alert-danger">
                                <span *ngIf="checkError('hinhAnh', 'required')">
                                    Hinh Anh không đc để trống
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Mo Ta</label>
                            <input type="text" class="form-control" formControlName="moTa" />
                            <div *ngIf="checkError('moTa')" class="alert alert-danger">
                                <span *ngIf="checkError('moTa', 'required')">
                                    Mo ta không đc để trống
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Ma Nhom</label>
                            <input type="text" class="form-control" formControlName="maNhom" />
                            <div *ngIf="checkError('maNhom')" class="alert alert-danger">
                                <span *ngIf="checkError('maNhom', 'required')">
                                    Ma Nhom không đc để trống
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Ngay Khoi Chieu</label>
                            <input type="text" class="form-control" formControlName="ngayKhoiChieu" />
                            <div *ngIf="checkError('ngayKhoiChieu')" class="alert alert-danger">
                                <span *ngIf="checkError('ngayKhoiChieu', 'required')">
                                    Ngay Khoi Chieu không đc để trống
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Danh Gia</label>
                            <input type="text" class="form-control" formControlName="danhGia" />
                            <div *ngIf="checkError('danhGia')" class="alert alert-danger">
                                <span *ngIf="checkError('danhGia', 'required')">
                                    Danh Gia không đc để trống
                                </span>
                            </div>
                        </div>

                    </div>

                    <button (click)="handleAddMovie()" class="btn btn-success mr-2">ADD</button>
                    <button class="btn btn-info mr-2" (click)="handleUpdateMovie()">UPDATE</button>
                    <button class="btn btn-danger mr-2" (click)="reset()">RESET</button>
                </form>
            </div>

        </div>
    </div>
</div>
<div class="table-responsive justify-content-between">
    <table class="table table-striped table-sm ">
        <thead>
            <tr>
                <th>Ma Phim</th>
                <th>Ten Phim</th>
                <th>Cap Nhat Danh Sach Phim</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let movie of movieList">
                <td>{{movie.maPhim}}</td>
                <td>{{movie.tenPhim}}<img [src]="movie.hinhAnh" width="70px" height="70px" alt=""></td>
                <td>

                    <button class="btn btn-info" (click)="onEdit(movie)">Edit</button>
                    <button class="btn btn-danger" (click)="handleDeleteMovie(movie.maPhim)">Delete</button>
                </td>
            </tr>

        </tbody>

    </table>
</div>